version: '3.7'
services:
  hub:
    build:
      dockerfile: ../Dockerfile-hub
      context: ./hub
    container_name: hub
    env_file:
      - .env
    ports:
      - "${HUB_PORT:-5000}:${HUB_PORT:-5000}"
  client:
    build:
      dockerfile: ../Dockerfile-client
      context: ./client
    env_file:
      - .env
    container_name: client
    ports:
      - "${CLIENT_PORT:-80}:${CLIENT_PORT:-80}"

  mongo:
    image: mongo:4.4.6
    container_name: mongo
    ports:
      - "${DB_PORT:-27017}:${DB_PORT:-27017}"
      
#  ldap:
#    image: tovawr/openldap:0.1
#    container_name: openldap
#    ports:
#      - "389:389"
#      - "636:636"
#    env_file:
#      - prod.env
#    volumes:
#      - ldap_data:/var/lib/ldap
#      - ldap_config:/etc/ldap/slapd.d

#  ctfd:
#    image: ctfd/ctfd:latest
#    container_name: ctfd
#    ports:
#      - "8000:8000"

#volumes:
#  ldap_data:
#  ldap_config:

